import{r as a,u as R,a as k,c,j as e,b as y}from"./index-CiYObJ11.js";import{t as C}from"./api-BeJd8zh7.js";import{F as L}from"./ArrowLeftIcon-re9wrq5x.js";import{F as p,a as v}from"./PlusIcon-PIRNoFhy.js";import{F}from"./TrashIcon-CDz94n0E.js";function $({title:r,titleId:n,...i},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const N=a.forwardRef($);function A({title:r,titleId:n,...i},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const M=a.forwardRef(A);function z({title:r,titleId:n,...i},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const P=a.forwardRef(z);function Z({title:r,titleId:n,...i},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const B=a.forwardRef(Z);function D({title:r,titleId:n,...i},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const O=a.forwardRef(D),G=()=>{const r=R(),{user:n,isAuthenticated:i}=k(),[t,h]=a.useState([]),[g,x]=a.useState(!0),[j,d]=a.useState("");a.useEffect(()=>{if(!i||!n||n.role!=="TRAINER"){d("No tienes autorización para ver esta página"),c.error("No tienes autorización para ver esta página");return}m()},[i,n]);const m=async()=>{try{x(!0),d("");const s=await C.getRoutines();if(console.log("[AllRoutines] Rutinas recibidas:",s.data),!s.data||!Array.isArray(s.data))throw new Error("Formato de datos inválido recibido del servidor");h(s.data),c.success("Rutinas cargadas exitosamente")}catch(s){if(console.error("[AllRoutines] Error al cargar las rutinas:",s),s.response?.status===401){const o="Sesión expirada. Por favor, inicia sesión nuevamente.";d(o),c.error(o)}else{const o="Error al cargar las rutinas. Por favor, intente nuevamente.";d(o),c.error(o)}}finally{x(!1)}},w=s=>{r(`/trainer/routines/${s}`)},b=s=>{r(`/trainer/routines/${s}/edit`)},E=async(s,l)=>{if(window.confirm(`¿Estás seguro de que quieres eliminar la rutina "${l}"?

Esta acción no se puede deshacer.`))try{await y.delete(`/trainer/routines/${s}`),c.success(`✅ Rutina "${l}" eliminada exitosamente.`),h(t.filter(u=>u.id!==s))}catch(u){console.error("Error al eliminar la rutina:",u),c.error("❌ Error al eliminar la rutina. Por favor, inténtalo de nuevo.")}},f=()=>{r("/trainer/create-routine")};return g?e.jsx("div",{className:"all-routines-page",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Cargando rutinas..."})]})}):j?e.jsx("div",{className:"all-routines-page",children:e.jsx("div",{className:"error-container",children:e.jsxs("div",{className:"error-card",children:[e.jsx("p",{className:"error-message",children:j}),e.jsxs("button",{onClick:m,className:"retry-btn",children:[e.jsx(N,{className:"btn-icon"}),"Reintentar"]})]})})}):e.jsxs("div",{className:"all-routines-page",children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsxs("button",{onClick:()=>r(-1),className:"back-btn",children:[e.jsx(L,{className:"btn-icon"}),"Volver al dashboard"]}),e.jsxs("div",{className:"page-title-section",children:[e.jsxs("h1",{className:"page-title",children:[e.jsx(p,{className:"title-icon"}),"Todas las Rutinas"]}),e.jsx("p",{className:"page-subtitle",children:"Gestiona y organiza todas tus rutinas de entrenamiento"})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{onClick:m,className:"secondary-btn",children:[e.jsx(N,{className:"btn-icon"}),"Actualizar"]}),e.jsxs("button",{onClick:f,className:"primary-btn",children:[e.jsx(v,{className:"btn-icon"}),"Nueva Rutina"]})]})]}),e.jsx("div",{className:"routines-content",children:t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(p,{})}),e.jsx("h3",{className:"empty-state-title",children:"No hay rutinas creadas"}),e.jsx("p",{className:"empty-state-description",children:"Comienza creando tu primera rutina de entrenamiento personalizada"}),e.jsxs("button",{onClick:f,className:"primary-btn large",children:[e.jsx(v,{className:"btn-icon"}),"Crear Primera Rutina"]})]}):e.jsx("div",{className:"routines-grid",children:t.map(s=>e.jsxs("div",{className:"routine-card",children:[e.jsxs("div",{className:"routine-card-header",children:[e.jsx("h3",{className:"routine-title",children:s.name}),s.description&&e.jsx("p",{className:"routine-description",children:s.description})]}),e.jsxs("div",{className:"routine-info",children:[s.client&&e.jsxs("div",{className:"info-item",children:[e.jsx(O,{className:"info-icon"}),e.jsx("span",{className:"info-label",children:"Cliente:"}),e.jsx("span",{className:"info-value",children:s.client.name})]}),s.duration&&e.jsxs("div",{className:"info-item",children:[e.jsx(M,{className:"info-icon"}),e.jsx("span",{className:"info-label",children:"Duración:"}),e.jsx("span",{className:"info-value",children:s.duration})]})]}),s.exercises&&s.exercises.length>0&&e.jsxs("div",{className:"exercises-preview",children:[e.jsxs("h4",{className:"exercises-title",children:["Ejercicios (",s.exercises.length,")"]}),e.jsxs("div",{className:"exercises-list",children:[s.exercises.slice(0,3).map((l,o)=>e.jsxs("div",{className:"exercise-item",children:["• ",l.name]},o)),s.exercises.length>3&&e.jsxs("div",{className:"exercise-item more",children:["... y ",s.exercises.length-3," más"]})]})]}),e.jsxs("div",{className:"routine-actions",children:[e.jsxs("button",{onClick:()=>w(s.id),className:"action-btn view",title:"Ver detalles",children:[e.jsx(P,{className:"btn-icon"}),"Ver"]}),e.jsxs("button",{onClick:()=>b(s.id),className:"action-btn edit",title:"Editar rutina",children:[e.jsx(B,{className:"btn-icon"}),"Editar"]}),e.jsxs("button",{onClick:()=>E(s.id,s.name),className:"action-btn delete",title:"Eliminar rutina",children:[e.jsx(F,{className:"btn-icon"}),"Eliminar"]})]})]},s.id))})})]})};export{G as default};
