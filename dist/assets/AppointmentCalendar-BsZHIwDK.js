import{r as a,u as k,b as i,j as e}from"./index-BJZa08pc.js";import{A as O}from"./arrow-left-CMXvvYhm.js";import{P as L}from"./plus-Au2yfni-.js";import{C as A,X as I}from"./x-BcSvllhB.js";import{C as M}from"./clock-C--YyARu.js";import{C as b}from"./check-CbLN4wTo.js";import{S as H,T as P}from"./trash-2-CnHLFTH_.js";import"./createLucideIcon-oAOawnFo.js";const V=()=>{const[o,p]=a.useState([]),[f,j]=a.useState([]),[n,y]=a.useState(new Date),[N,d]=a.useState(!1),[F,C]=a.useState(null),[x,g]=a.useState(!1),v=k(),[s,r]=a.useState({title:"",description:"",clientId:"",startTime:"",endTime:"",location:"",notes:""});a.useEffect(()=>{c(),w()},[n]);const c=async()=>{try{const t=new Date(n);t.setHours(0,0,0,0);const l=new Date(n);l.setHours(23,59,59,999);const u=await i.get("/appointments",{params:{start:t.toISOString(),end:l.toISOString()}});p(u.data.data)}catch(t){console.error("Error al obtener citas:",t)}},w=async()=>{try{const t=await i.get("/clients");j(t.data.data)}catch(t){console.error("Error al obtener clientes:",t)}},E=async()=>{if(!s.title||!s.clientId||!s.startTime||!s.endTime){alert("Por favor completa todos los campos requeridos");return}g(!0);try{const t=await i.post("/appointments",{...s,startTime:new Date(s.startTime).toISOString(),endTime:new Date(s.endTime).toISOString()});t.status>=200&&t.status<300&&(d(!1),r({title:"",description:"",clientId:"",startTime:"",endTime:"",location:"",notes:""}),c())}catch(t){console.error("Error al crear cita:",t)}finally{g(!1)}},m=async(t,l)=>{try{await i.patch(`/appointments/${t}`,{status:l}),c()}catch(u){console.error("Error al actualizar cita:",u)}},S=async t=>{if(confirm("¿Estás seguro de que quieres eliminar esta cita?"))try{await i.delete(`/appointments/${t}`),c()}catch(l){console.error("Error al eliminar cita:",l)}},h=t=>new Date(t).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),D=t=>{switch(t){case"SCHEDULED":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";case"COMPLETED":return"bg-blue-100 text-blue-800";case"NO_SHOW":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},T=t=>{switch(t){case"SCHEDULED":return"Programada";case"CONFIRMED":return"Confirmada";case"CANCELLED":return"Cancelada";case"COMPLETED":return"Completada";case"NO_SHOW":return"No asistió";default:return t}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:()=>v("/trainer/clients"),className:"flex items-center text-gray-600 hover:text-gray-800 mr-4",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"Volver a Clientes"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Calendario de Citas"}),e.jsx("p",{className:"text-gray-600",children:n.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center",children:[e.jsx(L,{className:"w-5 h-5 mr-2"}),"Nueva Cita"]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"date",value:n.toISOString().split("T")[0],onChange:t=>y(new Date(t.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Citas del día (",o.length,")"]}),o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No hay citas programadas para este día"})]}):e.jsx("div",{className:"space-y-4",children:o.map(t=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mr-3",children:t.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D(t.status)}`,children:T(t.status)})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[h(t.startTime)," - ",h(t.endTime)]})]}),e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsx("strong",{children:"Cliente:"})," ",t.client.name]}),t.description&&e.jsx("p",{className:"text-gray-600 mb-2",children:t.description}),t.location&&e.jsxs("p",{className:"text-gray-600 mb-2",children:[e.jsx("strong",{children:"Ubicación:"})," ",t.location]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[t.status==="SCHEDULED"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(t.id,"CONFIRMED"),className:"p-2 text-green-600 hover:bg-green-50 rounded-full",title:"Confirmar",children:e.jsx(b,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>m(t.id,"CANCELLED"),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",title:"Cancelar",children:e.jsx(I,{className:"w-4 h-4"})})]}),t.status==="CONFIRMED"&&e.jsx("button",{onClick:()=>m(t.id,"COMPLETED"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full",title:"Marcar como completada",children:e.jsx(b,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(t),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-full",title:"Editar",children:e.jsx(H,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",title:"Eliminar",children:e.jsx(P,{className:"w-4 h-4"})})]})]})},t.id))})]})})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Nueva Cita"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>r({...s,title:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Sesión de entrenamiento"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente *"}),e.jsxs("select",{value:s.clientId,onChange:t=>r({...s,clientId:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Seleccionar cliente"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora inicio *"}),e.jsx("input",{type:"datetime-local",value:s.startTime,onChange:t=>r({...s,startTime:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora fin *"}),e.jsx("input",{type:"datetime-local",value:s.endTime,onChange:t=>r({...s,endTime:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ubicación"}),e.jsx("input",{type:"text",value:s.location,onChange:t=>r({...s,location:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Gimnasio principal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),e.jsx("textarea",{value:s.description,onChange:t=>r({...s,description:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Detalles adicionales..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:E,disabled:x,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:x?"Creando...":"Crear Cita"})]})]})})]})};export{V as default};
