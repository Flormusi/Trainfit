import{u as F,r as o,j as n,y as z}from"./index-CiYObJ11.js";import{c as A}from"./clientService-AuBuwhW7.js";import{u as q,M as p,B as D}from"./ClientList-wJpoalV-.js";import"./removeClass-kOFgud-U.js";import"./index-CAMJE-gR.js";const K=()=>{const c=F(),{isMobile:t,isTablet:y,isDesktop:w,isLargeDesktop:S}=q(),[s,j]=o.useState([]),[b,v]=o.useState([]),[M,T]=o.useState(!0),[C,k]=o.useState(null),[L,g]=o.useState(!1),[u,R]=o.useState(null),[i,W]=o.useState(""),[l,B]=o.useState("all"),[x,d]=o.useState(null),f=o.useRef(null),h=o.useRef(null);o.useEffect(()=>{if(x==null){f.current=null,h.current=null;return}const e=a=>{const m=a.target;f.current&&f.current.contains(m)||h.current&&h.current.contains(m)||d(null)},r=a=>{a.key==="Escape"&&d(null)};return document.addEventListener("mousedown",e),window.addEventListener("keydown",r),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("keydown",r)}},[x]),o.useEffect(()=>{(async()=>{try{T(!0),k(null);const r=await A.getClients();let a=[];r&&r.data&&r.data.clients&&Array.isArray(r.data.clients)?a=r.data.clients:Array.isArray(r)?a=r:r&&r.data&&Array.isArray(r.data)?a=r.data:a=[],j(a),v(a)}catch(r){console.error("Error fetching clients:",r),k(r.response?.data?.message||r.message||"Failed to fetch clients")}finally{T(!1)}})()},[]),o.useEffect(()=>{let e=s;i&&(e=e.filter(r=>r.name.toLowerCase().includes(i.toLowerCase())||r.email.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(e=e.filter(r=>r.membership_tier===l)),v(e)},[s,i,l]);const Y=e=>{R(e),g(!0)},I=async()=>{if(u)try{await A.deleteClient(u.id),j(s.filter(e=>e.id!==u.id)),z.success("Cliente eliminado exitosamente")}catch(e){console.error("Error al eliminar cliente:",e),z.error(e.response?.data?.message||"Error al eliminar cliente")}finally{g(!1),R(null)}},N=e=>{c(`/trainer/clients/${e}`)},_=e=>{const r=s.find(m=>m.id===e),a=r?r.name:"Cliente";c("/trainer/create-routine",{state:{clientId:e,clientName:a,assignToClient:!0}})},E=()=>{c("/add-client")},P=()=>{c("/trainer/dashboard")};return M?n.jsx("div",{className:"client-list",children:n.jsx("div",{className:"loading-container",children:n.jsx("p",{children:"Cargando clientes..."})})}):C?n.jsx("div",{className:"client-list-container",children:n.jsxs("div",{className:"error-message",children:[n.jsx("h3",{children:"Error al cargar clientes"}),n.jsx("p",{children:C}),n.jsx("button",{onClick:()=>window.location.reload(),className:"retry-btn",children:"Reintentar"})]})}):n.jsxs("div",{className:"client-list-container",style:{margin:"0",padding:"16px",width:"100%",minHeight:"100vh",backgroundColor:"#121212",color:"#ffffff",border:"none",outline:"none",boxShadow:"none"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginBottom:"24px",padding:"16px",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",border:"none",outline:"none",boxShadow:"0 8px 24px rgba(214, 40, 40, 0.12), 0 4px 12px rgba(0, 0, 0, 0.35)",borderTop:"3px solid #D62828"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[n.jsx("button",{onClick:P,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"linear-gradient(135deg, #374151 0%, #1f2937 100%)",color:"#ffffff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",textDecoration:"none",fontSize:"0.9rem",boxShadow:`
              0 8px 24px rgba(0, 0, 0, 0.3),
              0 4px 12px rgba(0, 0, 0, 0.2),
              inset 0 1px 0 rgba(255, 255, 255, 0.1)
            `},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #4b5563 0%, #374151 100%)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=`
              0 12px 32px rgba(0, 0, 0, 0.4),
              0 4px 16px rgba(0, 0, 0, 0.2),
              inset 0 1px 0 rgba(255, 255, 255, 0.2)
            `},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, #374151 0%, #1f2937 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=`
              0 8px 24px rgba(0, 0, 0, 0.3),
              0 4px 12px rgba(0, 0, 0, 0.2),
              inset 0 1px 0 rgba(255, 255, 255, 0.1)
            `},children:"â† Volver al Dashboard"}),n.jsxs("button",{onClick:E,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"linear-gradient(135deg, #D62828 0%, #E83E3E 100%)",color:"white",border:"none",borderRadius:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.9rem",boxShadow:"0 10px 20px rgba(214, 40, 40, 0.28)"},onMouseEnter:e=>{e.currentTarget.style.filter="brightness(1.08)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 12px 24px rgba(214, 40, 40, 0.33)"},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 20px rgba(214, 40, 40, 0.28)"},children:[n.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"bold",border:"none",outline:"none",boxShadow:"none"},children:"+"}),n.jsx("span",{style:{display:t?"none":"inline"},children:"Agregar Cliente"})]})]}),n.jsxs("div",{style:{textAlign:"center",border:"none",outline:"none",boxShadow:"none"},children:[n.jsxs("h1",{style:{margin:"0",color:"#ffffff",fontSize:"36px",fontWeight:"900",border:"none",outline:"none",boxShadow:"none",textShadow:"0 0 8px rgba(214, 40, 40, 0.5), 0 0 24px rgba(214, 40, 40, 0.25)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[n.jsx("span",{style:{color:"#dc2626",fontSize:"28px"},children:"ðŸ‘¥"}),"Mis Clientes"]}),n.jsxs("p",{style:{margin:"4px 0 0 0",color:"#b0b0b0",fontSize:"clamp(0.85rem, 2.5vw, 1rem)",border:"none",outline:"none",boxShadow:"none"},children:["Gestiona y supervisa a todos tus clientes (",b.length," total)"]})]})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px",padding:"16px",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",border:"none",outline:"none",boxShadow:"0 8px 24px rgba(214, 40, 40, 0.12), 0 4px 12px rgba(0, 0, 0, 0.35)",borderTop:"3px solid #D62828"},children:n.jsxs("div",{style:{display:"flex",flexDirection:y||t?"column":"row",gap:"12px",border:"none",outline:"none",boxShadow:"none"},children:[n.jsx("div",{style:{flex:"1",border:"none",outline:"none",boxShadow:"none"},children:n.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:i,onChange:e=>W(e.target.value),style:{width:"100%",padding:"12px 16px",border:"none",borderRadius:"8px",fontSize:"1rem",backgroundColor:"#2d2d2d",color:"#ffffff",transition:"border-color 0.3s ease",outline:"none",boxShadow:"none",boxSizing:"border-box"}})}),n.jsx("div",{style:{minWidth:w||S?"200px":"100%",border:"none",outline:"none",boxShadow:"none"},children:n.jsxs("select",{value:l,onChange:e=>B(e.target.value),style:{width:"100%",padding:"12px 16px",border:"none",borderRadius:"8px",fontSize:"1rem",background:"#2d2d2d",color:"#ffffff",cursor:"pointer",transition:"border-color 0.3s ease",outline:"none",boxShadow:"none",boxSizing:"border-box"},children:[n.jsx("option",{value:"all",children:"Todos los planes"}),n.jsx("option",{value:"basic",children:"BÃ¡sico"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"pro",children:"Pro"})]})})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:S?"repeat(auto-fit, minmax(150px, 1fr))":w?"repeat(2, 1fr)":"1fr",gap:"12px",marginBottom:"20px",border:"none",outline:"none",boxShadow:"none"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%)",padding:t?"16px":"20px",borderRadius:"20px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:`
            0 12px 32px rgba(0, 0, 0, 0.4),
            0 4px 16px rgba(0, 0, 0, 0.2),
            inset 0 1px 0 rgba(255, 255, 255, 0.05)
          `,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[n.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:t?"1.5rem":"2rem",fontWeight:"700",color:"#ffffff",border:"none",outline:"none",boxShadow:"none"},children:s.length}),n.jsx("p",{style:{margin:"0",color:"#b0b0b0",fontSize:t?"0.8rem":"0.9rem",fontWeight:"500",border:"none",outline:"none",boxShadow:"none"},children:"Total Clientes"})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%)",padding:t?"16px":"20px",borderRadius:"20px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:`
            0 12px 32px rgba(0, 0, 0, 0.4),
            0 4px 16px rgba(0, 0, 0, 0.2),
            inset 0 1px 0 rgba(255, 255, 255, 0.05)
          `,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[n.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:t?"1.5rem":"2rem",fontWeight:"700",color:"#ffffff",border:"none",outline:"none",boxShadow:"none"},children:b.length}),n.jsx("p",{style:{margin:"0",color:"#b0b0b0",fontSize:t?"0.8rem":"0.9rem",fontWeight:"500",border:"none",outline:"none",boxShadow:"none"},children:"Mostrando"})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%)",padding:t?"16px":"20px",borderRadius:"20px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:`
            0 12px 32px rgba(0, 0, 0, 0.4),
            0 4px 16px rgba(0, 0, 0, 0.2),
            inset 0 1px 0 rgba(255, 255, 255, 0.05)
          `,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[n.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:t?"1.5rem":"2rem",fontWeight:"700",color:"#ffffff",border:"none",outline:"none",boxShadow:"none"},children:s.filter(e=>e.membership_tier==="premium").length}),n.jsx("p",{style:{margin:"0",color:"#b0b0b0",fontSize:t?"0.8rem":"0.9rem",fontWeight:"500",border:"none",outline:"none",boxShadow:"none"},children:"Premium"})]})]}),b.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"60px",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",border:"none",outline:"none",boxShadow:"none"},children:[n.jsx("div",{style:{fontSize:"4rem",marginBottom:"16px",border:"none",outline:"none",boxShadow:"none"},children:"ðŸ‘¥"}),n.jsx("h3",{style:{color:"#ffffff",marginBottom:"8px",border:"none",outline:"none",boxShadow:"none"},children:"No se encontraron clientes"}),n.jsx("p",{style:{color:"#b0b0b0",marginBottom:"24px",border:"none",outline:"none",boxShadow:"none"},children:i||l!=="all"?"Intenta ajustar tus filtros de bÃºsqueda":"Comienza agregando tu primer cliente"}),!i&&l==="all"&&n.jsx("button",{onClick:E,style:{padding:"12px 20px",background:"linear-gradient(135deg, #D62828 0%, #E83E3E 100%)",color:"white",border:"none",borderRadius:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem",boxShadow:"0 10px 20px rgba(214, 40, 40, 0.28)"},onMouseEnter:e=>{e.currentTarget.style.filter="brightness(1.08)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 12px 24px rgba(214, 40, 40, 0.33)"},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 20px rgba(214, 40, 40, 0.28)"},children:"Agregar Primer Cliente"})]}):n.jsx("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":y?"repeat(auto-fill, minmax(250px, 1fr))":w?"repeat(auto-fill, minmax(280px, 1fr))":"repeat(auto-fill, minmax(320px, 1fr))",gap:"12px",border:"none",outline:"none",boxShadow:"none"},children:b.map(e=>n.jsxs("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",padding:y?"12px":"16px",border:"none",borderTop:"2px solid #D62828",boxShadow:"0 6px 16px rgba(0, 0, 0, 0.35), 0 8px 18px rgba(214, 40, 40, 0.16)",transition:"transform 0.2s ease, box-shadow 0.2s ease, border 0.15s ease",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",position:"relative",overflow:"hidden",minHeight:"200px"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 8px 20px rgba(0, 0, 0, 0.42), 0 10px 20px rgba(214, 40, 40, 0.18)",r.currentTarget.style.border="1px solid rgba(214, 40, 40, 0.24)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.35), 0 8px 18px rgba(214, 40, 40, 0.16)",r.currentTarget.style.border="none"},children:[n.jsxs("div",{style:{position:"absolute",top:8,right:8},children:[n.jsx("button",{"aria-label":"MÃ¡s acciones",onClick:r=>{d(x===e.id?null:e.id),r.currentTarget.style.transform="scale(0.92)",setTimeout(()=>{r.currentTarget.style.transform="scale(1)"},140)},ref:r=>{x===e.id&&(h.current=r)},style:{width:"28px",height:"28px",borderRadius:"8px",border:"none",background:"rgba(255, 255, 255, 0.06)",color:"#bbb",cursor:"pointer",transition:"background 0.2s ease, color 0.2s ease, transform 0.2s ease"},onMouseEnter:r=>{r.currentTarget.style.background="rgba(255, 255, 255, 0.1)",r.currentTarget.style.color="#fff",r.currentTarget.style.transform="scale(1.05)"},onMouseLeave:r=>{r.currentTarget.style.background="rgba(255, 255, 255, 0.06)",r.currentTarget.style.color="#bbb",r.currentTarget.style.transform="scale(1)"},title:"MÃ¡s acciones",children:"â‹®"}),x===e.id&&n.jsxs("div",{style:{position:"absolute",right:0,top:"36px",minWidth:"180px",background:"#1f1f1f",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"8px",boxShadow:"0 8px 20px rgba(0,0,0,0.3)",padding:"6px",zIndex:1e3,display:"flex",flexDirection:"column",gap:"4px",opacity:0,transform:"scale(0.98) translateY(-2px)",transition:"opacity 160ms ease-out, transform 160ms ease-out",willChange:"opacity, transform"},ref:r=>{f.current=r,r&&requestAnimationFrame(()=>{r.style.opacity="1",r.style.transform="scale(1) translateY(0)"})},children:[n.jsx("button",{onClick:()=>{d(null),_(e.id)},style:{width:"100%",textAlign:"left",padding:"8px",border:"none",borderRadius:"6px",background:"transparent",color:"#ddd",cursor:"pointer"},children:"Asignar rutina"}),n.jsx("button",{onClick:()=>{d(null),c(`/trainer/messages?to=${e.id}`)},style:{width:"100%",textAlign:"left",padding:"8px",border:"none",borderRadius:"6px",background:"transparent",color:"#ddd",cursor:"pointer"},children:"Enviar mensaje"}),n.jsx("button",{onClick:()=>{d(null),Y(e)},style:{width:"100%",textAlign:"left",padding:"8px",border:"none",borderRadius:"6px",background:"transparent",color:"#e57373",cursor:"pointer"},children:"Eliminar"})]})]}),n.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"linear-gradient(135deg, #3a3a3a 0%, #2a2a2a 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.5rem",fontWeight:"700",margin:"0 auto",boxShadow:"0 0 8px rgba(214, 40, 40, 0.35)"},children:e.name.charAt(0).toUpperCase()}),n.jsxs("div",{style:{textAlign:"center",border:"none",outline:"none",boxShadow:"none"},children:[n.jsx("h3",{style:{margin:"0 0 8px 0",color:"#ffffff",fontSize:"1.25rem",fontWeight:"600",border:"none",outline:"none",boxShadow:"none"},children:e.name}),n.jsx("p",{style:{margin:"0 0 4px 0",color:"#b0b0b0",fontSize:"0.9rem",border:"none",outline:"none",boxShadow:"none"},children:e.email}),e.phone&&n.jsx("p",{style:{margin:"0 0 12px 0",color:"#b0b0b0",fontSize:"0.9rem",border:"none",outline:"none",boxShadow:"none"},children:e.phone}),e.membership_tier&&n.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"600",textTransform:"uppercase",background:e.membership_tier==="premium"?"rgba(220, 38, 38, 0.2)":e.membership_tier==="pro"?"rgba(245, 158, 11, 0.2)":"rgba(156, 163, 175, 0.2)",color:e.membership_tier==="premium"?"#ef4444":e.membership_tier==="pro"?"#f59e0b":"#9ca3af",border:"none",outline:"none",boxShadow:"none"},children:e.membership_tier.charAt(0).toUpperCase()+e.membership_tier.slice(1)})]}),n.jsx("div",{style:{marginTop:"auto",textAlign:"center"},children:n.jsx("button",{onClick:()=>N(e.id),style:{padding:"8px 14px",border:"none",borderRadius:"9999px",fontWeight:600,cursor:"pointer",transition:"background 0.2s ease, transform 0.1s ease",textAlign:"center",background:"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",color:"white"},onMouseEnter:r=>{r.currentTarget.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",r.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:r=>{r.currentTarget.style.background="linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",r.currentTarget.style.transform="translateY(0)"},title:"Ver Perfil",children:"Ver Perfil"})})]},e.id))}),n.jsxs(p,{show:L,onHide:()=>g(!1),style:{border:"none",outline:"none",boxShadow:"none"},children:[n.jsx(p.Header,{closeButton:!0,style:{borderBottom:"none",backgroundColor:"#f8f9fa",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",padding:"20px 24px",border:"none",outline:"none",boxShadow:"none"},children:n.jsx(p.Title,{style:{color:"#2c3e50",fontSize:"1.25rem",fontWeight:"600",border:"none",outline:"none",boxShadow:"none"},children:"Confirmar eliminaciÃ³n"})}),n.jsxs(p.Body,{style:{padding:"24px",color:"#495057",border:"none",outline:"none",boxShadow:"none"},children:[n.jsxs("p",{style:{border:"none",outline:"none",boxShadow:"none"},children:["Â¿EstÃ¡s seguro de que quieres eliminar a ",n.jsx("strong",{children:u?.name}),"?"]}),n.jsx("p",{style:{color:"#dc3545",fontSize:"0.9rem",marginTop:"8px",border:"none",outline:"none",boxShadow:"none"},children:"Esta acciÃ³n no se puede deshacer."})]}),n.jsxs(p.Footer,{style:{borderTop:"none",backgroundColor:"#f8f9fa",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",padding:"20px 24px",border:"none",outline:"none",boxShadow:"none"},children:[n.jsx(D,{variant:"secondary",onClick:()=>g(!1),style:{border:"none",outline:"none",boxShadow:"none"},children:"Cancelar"}),n.jsx(D,{variant:"danger",onClick:I,style:{border:"none",outline:"none",boxShadow:"none"},children:"Eliminar"})]})]})]})};export{K as default};
