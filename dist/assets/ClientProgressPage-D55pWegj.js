import{u as D,a as f,r as n,j as e,c as g}from"./index-CiYObJ11.js";import{c as r}from"./api-BeJd8zh7.js";const S=()=>{const i=D(),{user:l}=f(),[c,d]=n.useState([]),[t,o]=n.useState(null),[j,m]=n.useState(!0),[p,N]=n.useState(""),[u,h]=n.useState(!1);n.useEffect(()=>{v()},[]);const v=async()=>{try{m(!0);const s=await r.getAssignedRoutines();d(s.data||[]);const a=await r.getPaymentStatus();o(a.data)}catch(s){console.error("Error fetching progress data:",s),N("Error al cargar los datos de progreso"),d([{id:"1",name:"Rutina de Fuerza - Enero",description:"Rutina enfocada en desarrollo de fuerza muscular",assignedDate:"2024-01-01",status:"active",progress:75,exercises:[{id:"1",name:"Sentadillas",sets:4,reps:12,completed:!0},{id:"2",name:"Press de banca",sets:4,reps:10,completed:!0},{id:"3",name:"Peso muerto",sets:3,reps:8,completed:!1}]},{id:"2",name:"Rutina Cardio - Diciembre",description:"Rutina cardiovascular para resistencia",assignedDate:"2023-12-01",status:"completed",progress:100,exercises:[{id:"4",name:"Correr",sets:1,reps:30,completed:!0},{id:"5",name:"Burpees",sets:3,reps:15,completed:!0}]}]),o({isUpToDate:!0,lastPaymentDate:"2024-01-15",nextPaymentDue:"2024-02-15",amount:150})}finally{m(!1)}},y=async s=>{try{h(!0),await r.sendMonthlyRoutineEmail(s),g.success("Rutina enviada por correo electrÃ³nico exitosamente")}catch(a){console.error("Error sending email:",a),g.error("Error al enviar la rutina por correo")}finally{h(!1)}},b=s=>{const a={active:{text:"Activa",className:"status-active"},completed:{text:"Completada",className:"status-completed"},pending:{text:"Pendiente",className:"status-pending"}},x=a[s]||a.pending;return e.jsx("span",{className:`status-badge ${x.className}`,children:x.text})};return j?e.jsx("div",{className:"client-progress-page",children:e.jsxs("div",{className:"progress-header",children:[e.jsx("button",{className:"back-button",onClick:()=>i(`/client-dashboard/${l?.id}`),children:"â† Volver al Dashboard"}),e.jsx("h1",{children:"Cargando progreso..."})]})}):e.jsxs("div",{className:"client-progress-page",children:[e.jsxs("div",{className:"progress-header",children:[e.jsx("button",{className:"back-button",onClick:()=>i(`/client-dashboard/${l?.id}`),children:"â† Volver al Dashboard"}),e.jsx("h1",{children:"Mi Progreso"})]}),p&&e.jsx("div",{className:"error-message",children:p}),e.jsxs("div",{className:"payment-status-section",children:[e.jsx("h2",{children:"Estado de Cuotas"}),e.jsx("div",{className:"payment-card",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`payment-indicator ${t.isUpToDate?"up-to-date":"overdue"}`,children:t.isUpToDate?"âœ“ Al dÃ­a":"âš  Atrasado"}),e.jsxs("div",{className:"payment-details",children:[e.jsxs("div",{className:"payment-item",children:[e.jsx("span",{className:"label",children:"Ãšltimo pago:"}),e.jsx("span",{className:"value",children:new Date(t.lastPaymentDate).toLocaleDateString()})]}),e.jsxs("div",{className:"payment-item",children:[e.jsx("span",{className:"label",children:"PrÃ³ximo vencimiento:"}),e.jsx("span",{className:"value",children:new Date(t.nextPaymentDue).toLocaleDateString()})]}),e.jsxs("div",{className:"payment-item",children:[e.jsx("span",{className:"label",children:"Monto mensual:"}),e.jsxs("span",{className:"value",children:["$",t.amount]})]})]})]}):e.jsx("p",{children:"No se pudo cargar el estado de pagos"})})]}),e.jsxs("div",{className:"routines-section",children:[e.jsx("h2",{children:"Rutinas Asignadas"}),c.length===0?e.jsx("div",{className:"no-routines",children:e.jsx("p",{children:"No tienes rutinas asignadas actualmente."})}):e.jsx("div",{className:"routines-grid",children:c.map(s=>e.jsxs("div",{className:"routine-card",children:[e.jsxs("div",{className:"routine-header",children:[e.jsx("h3",{children:s.name}),b(s.status)]}),e.jsx("p",{className:"routine-description",children:s.description}),e.jsxs("div",{className:"routine-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"label",children:"Asignada:"}),e.jsx("span",{className:"value",children:new Date(s.assignedDate).toLocaleDateString()})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"label",children:"Progreso:"}),e.jsxs("span",{className:"value",children:[s.progress,"%"]})]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${s.progress}%`}})}),e.jsxs("div",{className:"exercises-summary",children:[e.jsxs("h4",{children:["Ejercicios (",s.exercises.length,")"]}),e.jsx("div",{className:"exercises-list",children:s.exercises.map(a=>e.jsxs("div",{className:"exercise-item",children:[e.jsxs("span",{className:`exercise-name ${a.completed?"completed":""}`,children:[a.completed?"âœ“":"â—‹"," ",a.name]}),e.jsxs("span",{className:"exercise-details",children:[a.sets," x ",a.reps]})]},a.id))})]}),e.jsx("div",{className:"routine-actions",children:e.jsx("button",{className:"email-button",onClick:()=>y(s.id),disabled:u,children:u?"Enviando...":"ğŸ“§ Enviar por Email"})})]},s.id))})]})]})};export{S as default};
