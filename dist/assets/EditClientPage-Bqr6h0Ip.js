import{e as N,r as d,u as w,j as e}from"./index-BJZa08pc.js";import{t as f}from"./api-B3G-AdDD.js";const D=()=>{const{clientId:n}=N(),[a,c]=d.useState({name:"",email:"",phone:"",age:"",gender:"",fitnessLevel:"",weight:"",height:"",goals:[],initialObjective:"",trainingDaysPerWeek:"",medicalConditions:"",medications:"",injuries:""}),[u,o]=d.useState(null),[h,x]=d.useState(null),[b,m]=d.useState(!1),[j,p]=d.useState(!0),g=w();d.useEffect(()=>{(async()=>{if(!n){o("ID de cliente no vÃ¡lido");return}try{p(!0);const r=await f.getClientDetails(n),i=r.data||r,s=i.clientProfile||{};console.log("Datos del cliente recibidos:",i),console.log("Perfil del cliente:",s),c({name:i.name||"",email:i.email||"",phone:i.phone||s.phone||"",age:s.age||i.age?(s.age||i.age).toString():"",gender:s.gender||i.gender||"",fitnessLevel:s.fitnessLevel||i.fitnessLevel||"",weight:s.weight||i.weight?(s.weight||i.weight).toString():"",height:s.height||i.height?(s.height||i.height).toString():"",goals:s.goals||i.goals||[],initialObjective:s.initialObjective||i.initialObjective||"",trainingDaysPerWeek:s.trainingDaysPerWeek||i.trainingDaysPerWeek?(s.trainingDaysPerWeek||i.trainingDaysPerWeek).toString():"",medicalConditions:s.medicalConditions||i.medicalConditions||"",medications:s.medications||i.medications||"",injuries:s.injuries||i.injuries||""})}catch(r){console.error("Error loading client data:",r),o("Error al cargar los datos del cliente")}finally{p(!1)}})()},[n]);const l=t=>{const{name:r,value:i}=t.target;c(s=>({...s,[r]:i}))},v=t=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t),y=async t=>{if(t.preventDefault(),o(null),x(null),m(!0),console.log("ðŸš€ Iniciando actualizaciÃ³n de cliente..."),console.log("ðŸ“‹ FormData actual:",a),console.log("ðŸ†” ClientId:",n),!a.name||!a.email){o("Por favor, completa todos los campos requeridos."),m(!1);return}if(!v(a.email)){o("Por favor, ingresa un correo electrÃ³nico vÃ¡lido."),m(!1);return}try{const r={name:a.name,email:a.email,phone:a.phone,age:a.age?parseInt(a.age):void 0,gender:a.gender||void 0,fitnessLevel:a.fitnessLevel||void 0,weight:a.weight?parseFloat(a.weight):void 0,height:a.height?parseFloat(a.height):void 0,goals:a.goals,initialObjective:a.initialObjective,trainingDaysPerWeek:a.trainingDaysPerWeek?parseInt(a.trainingDaysPerWeek):void 0,medicalConditions:a.medicalConditions,medications:a.medications,injuries:a.injuries};console.log("ðŸ“¤ Datos a enviar:",r);const i=await f.updateClientInfo(n,r);if(console.log("âœ… Respuesta del servidor:",i),i){console.log("ðŸŽ‰ ActualizaciÃ³n exitosa, preparando redirecciÃ³n..."),x("Cliente actualizado exitosamente.");const s=`/trainer/clients/${n}?updated=true`;console.log("ðŸ”„ Redirigiendo a:",s),setTimeout(()=>{console.log("â° Ejecutando redirecciÃ³n..."),g(s)},1e3)}else console.log("âŒ Respuesta no exitosa:",i),o("Error al actualizar el cliente. Respuesta no exitosa.")}catch(r){console.error("ðŸ’¥ Error updating client:",r),console.error("ðŸ’¥ Error response:",r.response),o(r.response?.data?.message||"Error al actualizar el cliente. IntÃ©ntalo de nuevo.")}finally{m(!1)}};return j?e.jsx("div",{className:"min-h-screen bg-[#1a1a1a] text-white p-6 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-8 w-8 text-[#dc2626]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-lg",children:"Cargando datos del cliente..."})]})}):e.jsx("div",{className:"min-h-screen bg-[#1a1a1a] text-white p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-[#dc2626]",children:"Editar Cliente"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Actualiza la informaciÃ³n del cliente"})]}),e.jsx("button",{onClick:()=>g(`/trainer/clients/${n}`),className:"px-6 py-3 bg-transparent border border-[#555555] hover:bg-[#333333] hover:border-[#777777] rounded-lg font-medium transition-all duration-300",children:"â† Volver al Cliente"})]}),e.jsxs("div",{className:"bg-[#2a2a2a] p-8 rounded-2xl shadow-2xl",children:[u&&e.jsx("div",{className:"bg-[#dc3545]/10 border border-[#dc3545]/30 text-[#dc3545] px-6 py-4 rounded-lg mb-6",role:"alert",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("strong",{className:"font-semibold",children:"Error: "}),e.jsx("span",{children:u})]})]})}),h&&e.jsx("div",{className:"bg-[#28a745]/10 border border-[#28a745]/30 text-[#28a745] px-6 py-4 rounded-lg mb-6",role:"alert",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("strong",{className:"font-semibold",children:"Â¡Ã‰xito! "}),e.jsx("span",{children:h})]})]})}),e.jsxs("form",{onSubmit:y,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-300 mb-2",children:["Nombre Completo ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:l,required:!0,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300",placeholder:"Ingresa el nombre completo"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-300 mb-2",children:["Correo ElectrÃ³nico ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:l,required:!0,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300",placeholder:"ejemplo@correo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-300 mb-2",children:"TelÃ©fono"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:l,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300",placeholder:"NÃºmero de telÃ©fono"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"age",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Edad"}),e.jsx("input",{type:"number",id:"age",name:"age",value:a.age,onChange:l,min:"1",max:"120",className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300",placeholder:"Edad en aÃ±os"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"weight",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Peso (kg)"}),e.jsx("input",{type:"number",id:"weight",name:"weight",value:a.weight,onChange:l,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300",placeholder:"Peso en kilogramos"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"height",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Altura (cm)"}),e.jsx("input",{type:"number",id:"height",name:"height",value:a.height,onChange:l,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300",placeholder:"Altura en centÃ­metros"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-semibold text-gray-300 mb-2",children:"GÃ©nero"}),e.jsxs("select",{id:"gender",name:"gender",value:a.gender,onChange:l,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300",children:[e.jsx("option",{value:"",children:"Seleccionar gÃ©nero"}),e.jsx("option",{value:"MALE",children:"Masculino"}),e.jsx("option",{value:"FEMALE",children:"Femenino"}),e.jsx("option",{value:"OTHER",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fitnessLevel",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Nivel de Fitness"}),e.jsxs("select",{id:"fitnessLevel",name:"fitnessLevel",value:a.fitnessLevel,onChange:l,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300",children:[e.jsx("option",{value:"",children:"Seleccionar nivel"}),e.jsx("option",{value:"BEGINNER",children:"Principiante"}),e.jsx("option",{value:"INTERMEDIATE",children:"Intermedio"}),e.jsx("option",{value:"ADVANCED",children:"Avanzado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"trainingDaysPerWeek",className:"block text-sm font-semibold text-gray-300 mb-2",children:"DÃ­as de entrenamiento por semana"}),e.jsx("input",{type:"number",id:"trainingDaysPerWeek",name:"trainingDaysPerWeek",value:a.trainingDaysPerWeek,onChange:l,min:"1",max:"7",className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300",placeholder:"1-7 dÃ­as"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-4",children:"Objetivos"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["PÃ©rdida de peso","Ganancia muscular","Resistencia","Fuerza","Flexibilidad","RehabilitaciÃ³n"].map(t=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-[#1a1a1a] border border-[#555555] rounded-lg hover:border-[#777777] transition-all duration-300 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.goals.includes(t),onChange:r=>{r.target.checked?c(i=>({...i,goals:[...i.goals,t]})):c(i=>({...i,goals:i.goals.filter(s=>s!==t)}))},className:"w-4 h-4 text-[#dc2626] bg-[#2a2a2a] border-[#555555] rounded focus:ring-[#dc2626] focus:ring-2"}),e.jsx("span",{className:"text-sm text-gray-300",children:t})]},t))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"initialObjective",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Objetivo Inicial"}),e.jsx("textarea",{id:"initialObjective",name:"initialObjective",value:a.initialObjective,onChange:l,rows:3,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300 resize-none",placeholder:"Describe el objetivo inicial del cliente..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"medicalConditions",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Condiciones MÃ©dicas"}),e.jsx("textarea",{id:"medicalConditions",name:"medicalConditions",value:a.medicalConditions,onChange:l,rows:3,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300 resize-none",placeholder:"Describe cualquier condiciÃ³n mÃ©dica relevante..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"medications",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Medicamentos"}),e.jsx("textarea",{id:"medications",name:"medications",value:a.medications,onChange:l,rows:3,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300 resize-none",placeholder:"Lista los medicamentos que toma actualmente..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"injuries",className:"block text-sm font-semibold text-gray-300 mb-2",children:"Lesiones"}),e.jsx("textarea",{id:"injuries",name:"injuries",value:a.injuries,onChange:l,rows:3,className:"w-full px-4 py-3 bg-[#1a1a1a] border border-[#555555] rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-[#dc2626] focus:border-[#dc2626] transition-all duration-300 resize-none",placeholder:"Describe lesiones previas o actuales..."})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx("button",{type:"submit",className:"flex-1 py-4 px-6 bg-[#dc2626] hover:bg-[#b91c1c] text-white font-semibold rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:b,children:b?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Actualizando..."]}):"Actualizar Cliente"}),e.jsx("button",{type:"button",onClick:()=>g(`/trainer/clients/${n}/progress`),className:"flex-1 py-4 px-6 bg-transparent border border-[#555555] hover:bg-[#333333] hover:border-[#777777] text-gray-300 font-semibold rounded-lg transition-all duration-300",children:"Cancelar"})]})]})]})]})})};export{D as default};
