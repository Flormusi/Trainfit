import{u as D,r as t,j as e}from"./index-BJZa08pc.js";import{t as C}from"./api-B3G-AdDD.js";const T=()=>{const E=D(),[l,j]=t.useState([]),[p,v]=t.useState([]),[h,o]=t.useState(!0),[f,g]=t.useState(null),[d,w]=t.useState(""),[u,q]=t.useState("all"),[a,b]=t.useState(null),[F,m]=t.useState(!1),[r,N]=t.useState({name:"",description:"",category:"strength",difficulty:"intermediate",instructions:"",videoUrl:"",targetMuscles:"",equipment:"",notes:""}),x=[{id:"all",name:"Todos"},{id:"strength",name:"Fuerza"},{id:"cardio",name:"Cardio"},{id:"flexibility",name:"Flexibilidad"},{id:"balance",name:"Equilibrio"},{id:"plyometric",name:"Pliométrico"},{id:"functional",name:"Funcional"}];t.useEffect(()=>{(async()=>{try{const i=await C.getExercises();j(i.data),v(i.data),o(!1)}catch(i){console.error("Error fetching exercises:",i),g("Failed to load exercises"),o(!1)}})()},[]),t.useEffect(()=>{const s=l.filter(i=>{const n=(i.name?i.name.toLowerCase():"").includes(d.toLowerCase())||(i.description?i.description.toLowerCase():"").includes(d.toLowerCase()),z=u==="all"||i.category===u;return n&&z});v(s)},[d,u,l]);const S=s=>{w(s.target.value)},M=s=>{q(s)},U=s=>{b(s)},k=()=>{b(null)},c=s=>{const{name:i,value:n}=s.target;N({...r,[i]:n})},A=async s=>{s.preventDefault(),o(!0);try{const i=await C.createExercise(r);j([...l,i.data]),m(!1),N({name:"",description:"",category:"strength",difficulty:"intermediate",instructions:"",videoUrl:"",targetMuscles:"",equipment:"",notes:""})}catch(i){console.error("Error creating exercise:",i),g("Failed to create exercise")}finally{o(!1)}},L=s=>{if(!s)return null;const i=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,n=s.match(i);return n&&n[2].length===11?`https://www.youtube.com/embed/${n[2]}`:null},y=s=>{const i=x.find(n=>n.id===s);return i?i.name:s};return h&&l.length===0?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs("div",{className:"exercise-library",children:[e.jsxs("div",{className:"library-header",children:[e.jsx("button",{className:"back-button",onClick:()=>E("/trainer-dashboard"),children:"← Volver"}),e.jsx("h1",{children:"Biblioteca de ejercicios"})]}),f&&e.jsx("div",{className:"error-message",children:f}),e.jsxs("div",{className:"library-controls",children:[e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"text",placeholder:"Buscar ejercicios...",value:d,onChange:S})}),e.jsx("div",{className:"category-filters",children:x.map(s=>e.jsx("button",{className:`category-btn ${u===s.id?"active":""}`,onClick:()=>M(s.id),children:s.name},s.id))}),e.jsx("button",{className:"add-exercise-btn",onClick:()=>m(!0),children:"+ Añadir ejercicio"})]}),e.jsx("div",{className:"exercises-grid",children:p.length===0?e.jsx("div",{className:"no-results",children:"No se encontraron ejercicios que coincidan con tu búsqueda"}):p.map((s,i)=>e.jsxs("div",{className:"exercise-card",onClick:()=>U(s),children:[e.jsx("span",{className:"exercise-category",children:y(s.category)}),e.jsx("h3",{children:s.name}),e.jsx("p",{className:"exercise-description",children:s.description}),e.jsx("div",{className:"exercise-difficulty",children:e.jsxs("span",{className:`difficulty-level ${s.difficulty}`,children:[s.difficulty==="beginner"&&"Principiante",s.difficulty==="intermediate"&&"Intermedio",s.difficulty==="advanced"&&"Avanzado"]})})]},i))}),a&&e.jsx("div",{className:"exercise-details-overlay",children:e.jsxs("div",{className:"exercise-details",children:[e.jsx("button",{className:"close-details-btn",onClick:k,children:"✕"}),e.jsx("h2",{children:a.name}),e.jsxs("div",{className:"details-meta",children:[e.jsx("span",{className:"category-tag",children:y(a.category)}),e.jsxs("span",{className:`difficulty-tag ${a.difficulty}`,children:[a.difficulty==="beginner"&&"Principiante",a.difficulty==="intermediate"&&"Intermedio",a.difficulty==="advanced"&&"Avanzado"]})]}),e.jsx("div",{className:"details-description",children:e.jsx("p",{children:a.description})}),a.videoUrl&&e.jsx("div",{className:"video-container",children:e.jsx("iframe",{src:L(a.videoUrl),title:a.name,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"details-section",children:[e.jsx("h3",{children:"Instrucciones"}),e.jsx("p",{children:a.instructions||"No hay instrucciones disponibles para este ejercicio."})]}),a.targetMuscles&&e.jsxs("div",{className:"details-section",children:[e.jsx("h3",{children:"Músculos objetivo"}),e.jsx("p",{children:a.targetMuscles})]}),a.equipment&&e.jsxs("div",{className:"details-section",children:[e.jsx("h3",{children:"Equipamiento necesario"}),e.jsx("p",{children:a.equipment})]}),a.notes&&e.jsxs("div",{className:"details-section",children:[e.jsx("h3",{children:"Notas adicionales"}),e.jsx("p",{children:a.notes})]}),e.jsx("div",{className:"details-actions",children:e.jsx("button",{className:"use-in-routine-btn",children:"Usar en rutina"})})]})}),F&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"add-exercise-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Añadir nuevo ejercicio"}),e.jsx("button",{className:"close-modal-btn",onClick:()=>m(!1),children:"✕"})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Nombre del ejercicio"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:c,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Descripción breve"}),e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:c,rows:"2",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"category",children:"Categoría"}),e.jsx("select",{id:"category",name:"category",value:r.category,onChange:c,required:!0,children:x.filter(s=>s.id!=="all").map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"difficulty",children:"Dificultad"}),e.jsxs("select",{id:"difficulty",name:"difficulty",value:r.difficulty,onChange:c,required:!0,children:[e.jsx("option",{value:"beginner",children:"Principiante"}),e.jsx("option",{value:"intermediate",children:"Intermedio"}),e.jsx("option",{value:"advanced",children:"Avanzado"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"instructions",children:"Instrucciones"}),e.jsx("textarea",{id:"instructions",name:"instructions",value:r.instructions,onChange:c,rows:"4",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"videoUrl",children:"URL del video (YouTube)"}),e.jsx("input",{type:"url",id:"videoUrl",name:"videoUrl",value:r.videoUrl,onChange:c,placeholder:"https://www.youtube.com/watch?v=..."})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"targetMuscles",children:"Músculos objetivo"}),e.jsx("input",{type:"text",id:"targetMuscles",name:"targetMuscles",value:r.targetMuscles,onChange:c,placeholder:"Ej: Cuádriceps, isquiotibiales, glúteos"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"equipment",children:"Equipamiento necesario"}),e.jsx("input",{type:"text",id:"equipment",name:"equipment",value:r.equipment,onChange:c,placeholder:"Ej: Mancuernas, barra, banco"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"notes",children:"Notas adicionales"}),e.jsx("textarea",{id:"notes",name:"notes",value:r.notes,onChange:c,rows:"3",placeholder:"Variaciones, precauciones, consejos, etc."})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>m(!1),children:"Cancelar"}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:h,children:h?"Guardando...":"Guardar ejercicio"})]})]})]})})]})};export{T as default};
