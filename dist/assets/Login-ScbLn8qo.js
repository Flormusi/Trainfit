import{u as b,a as f,r as s,j as e,c as g}from"./index-CiYObJ11.js";const x=()=>{const i=b(),{login:u,user:a,isAuthenticated:r,loading:m}=f(),[o,h]=s.useState({email:"test.trainer@trainfit.com",password:"test123"}),[t,l]=s.useState(!1);s.useEffect(()=>{if(console.log("[Login] Checking authentication state - User:",a,"IsAuthenticated:",r),r()&&a){console.log("[Login] User is authenticated, redirecting based on role:",a.role);const n=a.role.toUpperCase();n==="CLIENT"?a.hasCompletedOnboarding?(console.log("[Login] Client has completed onboarding, redirecting to dashboard"),i(`/client-dashboard/${a.id}`,{replace:!0})):(console.log("[Login] Client has not completed onboarding, redirecting to onboarding"),i("/client/onboarding",{replace:!0})):n==="TRAINER"&&(console.log("[Login] Trainer detected, redirecting to trainer dashboard"),i("/trainer-dashboard",{replace:!0}))}},[a,r,i]);const d=n=>{h({...o,[n.target.name]:n.target.value})},p=async n=>{if(n.preventDefault(),!o.email||!o.password){g.error("Por favor, completa todos los campos");return}l(!0),console.log("[Login] Attempting login with email:",o.email);try{await u(o)}catch(c){console.error("[Login] Error during login:",c),g.error(c.response?.data?.message||"Error al iniciar sesión. Por favor, verifica tus credenciales e inténtalo de nuevo.")}finally{l(!1)}};return m?e.jsx("div",{className:"login-container",children:e.jsx("div",{children:"Cargando..."})}):e.jsxs("div",{className:"login-container",children:[e.jsx("img",{src:"/images/logo-trainfit.png",alt:"TrainFit Logo",className:"login-logo"}),e.jsx("h1",{className:"login-title",children:"INICIAR SESIÓN"}),e.jsxs("form",{onSubmit:p,className:"login-form",children:[e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:o.email,onChange:d,required:!0,disabled:t}),e.jsx("input",{type:"password",name:"password",placeholder:"Contraseña",value:o.password,onChange:d,required:!0,disabled:t}),e.jsx("button",{type:"submit",disabled:t,className:"btn-login",children:t?"Iniciando sesión...":"INICIAR SESIÓN"})]}),e.jsx("button",{className:"btn-register-link",onClick:()=>i("/register"),disabled:t,children:"REGISTRARSE"})]})};export{x as default};
