import{r as p,u as Te,b as T,j as e,O as ke,c as H}from"./index-BJZa08pc.js";import{r as $,t as G,a as Oe,b as He,v as m,f as j,s as X,C as Me,d as Ae,g as Ie,l as Le}from"./react-big-calendar-DNk6tmJd.js";import{t as $e}from"./api-B3G-AdDD.js";import{A as re}from"./arrow-left-CMXvvYhm.js";import{C as J,X as le}from"./x-BcSvllhB.js";import{P as Re}from"./plus-Au2yfni-.js";import{c as ce}from"./createLucideIcon-oAOawnFo.js";import{C as Fe}from"./clock-C--YyARu.js";import{D as We}from"./dumbbell-CIfm6DXM.js";import"./defineProperty-BMO0z4KE.js";import"./typeof-QjJsDpFa.js";import"./removeClass-CFGF9p2m.js";import"./index-BNbO9ku5.js";/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_e=ce("arrow-right",Pe);/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ue=ce("user",ze);function ie(u){$(1,arguments);var l=G(u);return l.setHours(0,0,0,0),l}function Ge(u,l){$(2,arguments);var x=ie(u),b=ie(l);return x.getTime()===b.getTime()}function qe(u){$(1,arguments);var l=G(u),x=l.getMonth();return l.setFullYear(l.getFullYear(),x+1,0),l.setHours(23,59,59,999),l}function Be(u){$(1,arguments);var l=G(u);return l.setDate(1),l.setHours(0,0,0,0),l}function oe(u,l){var x,b,R,F,W,k,M,v;$(1,arguments);var a=He(),f=Oe((x=(b=(R=(F=l?.weekStartsOn)!==null&&F!==void 0?F:l==null||(W=l.locale)===null||W===void 0||(k=W.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&R!==void 0?R:a.weekStartsOn)!==null&&b!==void 0?b:(M=a.locale)===null||M===void 0||(v=M.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&x!==void 0?x:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=G(u),E=w.getDay(),P=(E<f?-7:0)+6-(E-f);return w.setDate(w.getDate()+P),w.setHours(23,59,59,999),w}const Ke=()=>{const[u,l]=p.useState({width:typeof window<"u"?window.innerWidth:1200,height:typeof window<"u"?window.innerHeight:800});return p.useEffect(()=>{const x=()=>{l({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),u},Ve={es:Le},Ye=Ae({format:j,startOfWeek:u=>X(u,{weekStartsOn:1}),getDay:Ie,locales:Ve}),ct=()=>{const[u,l]=p.useState([]),[x,b]=p.useState([]),[R,F]=p.useState([]),[W,k]=p.useState(new Date),[M,v]=p.useState(!1),[a,f]=p.useState(null),[w,E]=p.useState(!1),[P,Q]=p.useState(!1),[c,D]=p.useState({title:"",startTime:"",endTime:"",location:"",description:"",notes:""}),[Z,ee]=p.useState(!1),[h,A]=p.useState(m.MONTH),[N,_]=p.useState(new Date),te=Te(),{width:C}=Ke(),[d,S]=p.useState({title:"",description:"",type:"sesion",clientId:"",routineId:"",startTime:"",endTime:"",location:"",notes:""});p.useEffect(()=>{z(),de()},[N,h]),p.useEffect(()=>{a&&(D({title:a.title||"",startTime:j(new Date(a.start),"yyyy-MM-dd'T'HH:mm"),endTime:j(new Date(a.end),"yyyy-MM-dd'T'HH:mm"),location:a.location||"",description:a.description||"",notes:a.notes||""}),E(!1))},[a]);const z=async()=>{try{if(!localStorage.getItem("token")){console.error("No hay token de autenticaciÃ³n"),l([]);return}let s,r;h===m.MONTH?(s=X(Be(N),{weekStartsOn:1}),r=oe(qe(N),{weekStartsOn:1})):h===m.WEEK?(s=X(N,{weekStartsOn:1}),r=oe(N,{weekStartsOn:1})):(s=new Date(N),s.setHours(0,0,0,0),r=new Date(N),r.setHours(23,59,59,999));const n=new URLSearchParams({startDate:s.toISOString(),endDate:r.toISOString()}),[i,g,y]=await Promise.all([T.get("/routine-schedule",{params:Object.fromEntries(n)}),T.get("/appointments",{params:Object.fromEntries(n)}),T.get("/appointments/consultations",{params:Object.fromEntries(n)})]),O=i?.data??[],B=g?.data??[],K=y?.data??[],V=o=>{const Ee=new Date(o.startTime),De=new Date(o.endTime),I=o.client||{},ne=I.name||I.clientProfile?.name||I.email||"Cliente",Y=String(o.type||"").toUpperCase();let L;return Y==="ROUTINE"?L="routine":Y==="SESSION"?L="session":Y==="CONSULTATION"?L="consultation":L="session",{id:String(o.id),title:o.title||`SesiÃ³n - ${ne}`,start:Ee,end:De,type:L,status:o.status,description:o.description,location:o.location,notes:o.notes,client:{id:String(I.id||o.clientId||""),name:String(ne),email:String(I.email||"")}}},we=(Array.isArray(O)?O:O?.data||[]).filter(o=>o?.status!=="CANCELLED").map(V).filter(o=>o.type==="routine"),Ce=(Array.isArray(B)?B:B?.data||[]).filter(o=>o?.status!=="CANCELLED").map(V).filter(o=>o.type==="session"),Se=(Array.isArray(K)?K:K?.data||[]).filter(o=>o?.status!=="CANCELLED").map(V).filter(o=>o.type==="consultation");l([...we,...Ce,...Se])}catch(t){console.error("Error al obtener eventos:",t),l([])}},de=async()=>{try{const t=await $e.getClients(),s=t&&t.data?t.data:[],n=(Array.isArray(s)?s:s?.clients??s?.items??[]).map(i=>({id:String(i.id??i._id??i.clientId??""),name:String(i.name??i.clientProfile?.nickname??i.clientProfile?.name??i.email??"Sin nombre"),email:String(i.email??i.clientProfile?.email??"")})).filter(i=>i.id);b(n)}catch(t){console.error("Error al obtener clientes:",t),b([])}},me=async()=>{if(!d.title||!d.clientId||!d.startTime||!d.endTime){alert("Por favor completa todos los campos requeridos");return}ee(!0);try{const t=localStorage.getItem("token"),r=d.type==="routine"||d.type==="rutina"?"/routine-schedule":"/appointments",n=await T.post(r,{...d,startTime:new Date(d.startTime).toISOString(),endTime:new Date(d.endTime).toISOString()});n.status>=200&&n.status<300?(H.success("Evento creado con Ã©xito",{duration:3e3,style:{background:"#2d2d2d",color:"#fff"}}),v(!1),q(),z()):H.error("Error al procesar la acciÃ³n",{duration:3e3,style:{background:"#2d2d2d",color:"#fff"}})}catch(t){console.error("Error al crear evento:",t),H.error("Error al procesar la acciÃ³n",{duration:3e3,style:{background:"#2d2d2d",color:"#fff"}})}finally{ee(!1)}},q=()=>{S({title:"",description:"",type:"sesion",clientId:"",routineId:"",startTime:"",endTime:"",location:"",notes:""})},U=async(t,s)=>{try{const r=localStorage.getItem("token"),n=await T.put(`/appointments/${t}`,{status:s});n.status>=200&&n.status<300&&z()}catch(r){console.error("Error al actualizar evento:",r)}},ue=async()=>{if(a){if(!c.title||!c.startTime||!c.endTime){alert("Completa tÃ­tulo e inicio/fin");return}Q(!0);try{const t=localStorage.getItem("token"),s=await T.put(`/appointments/${a.id}`,{title:c.title,description:c.description,location:c.location,notes:c.notes,startTime:new Date(c.startTime).toISOString(),endTime:new Date(c.endTime).toISOString()});s.status>=200&&s.status<300&&(f(null),E(!1),z())}catch(t){console.error("Error al guardar cambios del evento:",t)}finally{Q(!1)}}},pe=async t=>{if(confirm("Â¿EstÃ¡s seguro de que quieres eliminar este evento?"))try{const s=localStorage.getItem("token"),n=u.find(g=>g.id===t)?.type==="routine"?`/routine-schedule/${t}`:`/appointments/${t}`,i=await T.delete(n);i.status>=200&&i.status<300?(l(g=>g.filter(y=>y.id!==t)),H.success("Evento eliminado con Ã©xito",{duration:3e3,style:{background:"#2d2d2d",color:"#fff"}}),f(null)):H.error("Error al procesar la acciÃ³n",{duration:3e3,style:{background:"#2d2d2d",color:"#fff"}})}catch(s){console.error("Error al eliminar evento:",s),H.error("Error al procesar la acciÃ³n",{duration:3e3,style:{background:"#2d2d2d",color:"#fff"}})}},fe=t=>{t.type==="routine"?te(`/trainer/routines/${t.routine?.id}`):f(t)},se=t=>(typeof t=="string"?new Date(t):t).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),he=(t,s)=>{const r=typeof t=="string"?new Date(t):t,n=typeof s=="string"?new Date(s):s,i=se(r),g=se(n);return r.getTime()===n.getTime()?i:`${i}â€“${g}`},ge=t=>{switch(t){case"routine":return e.jsx(We,{className:"w-4 h-4"});case"session":return e.jsx(Ue,{className:"w-4 h-4"});case"consultation":return e.jsx(Fe,{className:"w-4 h-4"});default:return e.jsx(J,{className:"w-4 h-4"})}},ae=t=>{switch(t){case"routine":return"Rutina";case"session":return"SesiÃ³n";case"consultation":return"Consulta";default:return"Evento"}},xe=t=>{switch(t){case"SCHEDULED":return"Programado";case"CONFIRMED":return"Confirmado";case"CANCELLED":return"Cancelado";case"COMPLETED":return"Completado";case"NO_SHOW":return"No presentado";default:return"Sin estado"}},ve=t=>{const s=t.type?.toString().trim().toLowerCase().normalize("NFD").replace(/[\u0301\u0308]/g,"").replace(/\s+/g,"");let r;["rutina","routine","rutinas"].includes(s||"")?r="#E53935":["sesion","session","sesiones"].includes(s||"")?r="#FB8C00":["consulta","consultation","consultas"].includes(s||"")?r="#8E24AA":r="#E53935";let n="calendar-event";return["rutina","routine","rutinas"].includes(s||"")?n+=" event-rutina":["sesion","session","sesiones"].includes(s||"")?n+=" event-sesion":["consulta","consultation","consultas"].includes(s||"")?n+=" event-consulta":n+=" event-default",{className:n,style:{backgroundColor:r,color:"white",borderRadius:"8px",borderLeft:`4px solid ${r}`,padding:"2px 6px"}}},ye=t=>{try{const s=t?.start?new Date(t.start):new Date,r=t?.end?new Date(t.end):new Date(s.getTime()+60*60*1e3);S(n=>({...n,title:n.title||"",startTime:j(s,"yyyy-MM-dd'T'HH:mm"),endTime:j(r,"yyyy-MM-dd'T'HH:mm")})),k(s),v(!0)}catch(s){console.error("Error al seleccionar slot:",s),v(!0)}},Ne=t=>{const s=new Date(t);s.setHours(9,0,0,0);const r=new Date(s.getTime()+60*60*1e3);S(n=>({...n,startTime:j(s,"yyyy-MM-dd'T'HH:mm"),endTime:j(r,"yyyy-MM-dd'T'HH:mm")})),k(s),v(!0)},je=({value:t,children:s})=>{const n=(g=>{const y=new Set;return u.forEach(O=>{try{Ge(g,O.start)&&y.add(O.type)}catch{}}),Array.from(y)})(t),i=g=>{if(h!==m.MONTH)return;const y=g.target;y&&(y.closest(".rbc-event")||y.closest(".rbc-event-content")||y.closest(".rbc-event-label"))||(g.preventDefault(),g.stopPropagation(),Ne(t))};return e.jsxs("div",{onClick:i,className:"date-cell-wrapper",role:"button",tabIndex:0,children:[s,h===m.MONTH&&n.length>0&&e.jsxs("div",{className:"day-markers","aria-hidden":!0,children:[n.includes("routine")&&e.jsx("span",{className:"day-marker marker-rutina"}),n.includes("session")&&e.jsx("span",{className:"day-marker marker-sesion"}),n.includes("consultation")&&e.jsx("span",{className:"day-marker marker-consulta"})]})]})},be=({event:t})=>{const s=new Date(t.start),r=new Date(t.end),n=`${j(s,"HH:mm")} - ${j(r,"HH:mm")}`,i=t.type==="routine"?"ðŸ”´":t.type==="session"?"ðŸŸ ":"ðŸŸ£";return e.jsx("div",{title:`${i} ${t.title} Â· ${n}`,children:t.title})};return e.jsxs("div",{className:"unified-calendar",children:[e.jsx(ke,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#2d2d2d",color:"#fff"}}}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"calendar-header",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:()=>te("/trainer-dashboard"),className:"flex items-center text-gray-300 hover:text-white transition-colors",children:[e.jsx(re,{className:"w-5 h-5 mr-2"}),"Volver al Dashboard"]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("h1",{className:"calendar-title flex items-center",children:[e.jsx(J,{className:"w-8 h-8 mr-3 text-red-500"}),"Calendario Unificado"]}),e.jsx("p",{className:"text-gray-400",children:"Gestiona rutinas, sesiones y consultas en un solo lugar"})]}),e.jsx("div",{className:"calendar-actions",children:e.jsxs("button",{onClick:()=>v(!0),className:"btn-create-event",style:{width:C<=768?"100%":"auto",maxWidth:C<=768?"300px":"none",margin:C<=768?"0 auto":"0",padding:C<=480?"14px 20px":C<=768?"16px 24px":"12px 24px",fontSize:C<=480?"0.9rem":C<=768?"1rem":"0.875rem",display:"flex",alignItems:"center",justifyContent:C<=768?"center":"flex-start",gap:"8px"},children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{children:"Nuevo Evento"})]})})]}),e.jsx("div",{className:"calendar-container",children:e.jsxs("div",{className:"unified-calendar-container",children:[e.jsxs("div",{className:"calendar-toolbar",children:[e.jsxs("div",{className:"toolbar-left",children:[e.jsxs("button",{className:"btn-nav",onClick:()=>{const t=new Date(N);h===m.MONTH?t.setMonth(t.getMonth()-1):h===m.WEEK?t.setDate(t.getDate()-7):t.setDate(t.getDate()-1),_(t)},children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Anterior"})]}),e.jsxs("button",{className:"btn-today",onClick:()=>_(new Date),children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:"Hoy"})]}),e.jsxs("button",{className:"btn-nav",onClick:()=>{const t=new Date(N);h===m.MONTH?t.setMonth(t.getMonth()+1):h===m.WEEK?t.setDate(t.getDate()+7):t.setDate(t.getDate()+1),_(t)},children:[e.jsx("span",{children:"Siguiente"}),e.jsx(_e,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"toolbar-right",children:e.jsxs("div",{className:"view-selector",children:[e.jsx("button",{className:`btn-view ${h===m.MONTH?"active":""}`,onClick:()=>A(m.MONTH),children:e.jsx("span",{children:"Mes"})}),e.jsx("button",{className:`btn-view ${h===m.WEEK?"active":""}`,onClick:()=>A(m.WEEK),children:e.jsx("span",{children:"Semana"})}),e.jsx("button",{className:`btn-view ${h===m.DAY?"active":""}`,onClick:()=>A(m.DAY),children:e.jsx("span",{children:"DÃ­a"})}),e.jsx("button",{className:`btn-view ${h===m.AGENDA?"active":""}`,onClick:()=>A(m.AGENDA),children:e.jsx("span",{children:"Agenda"})})]})})]}),h===m.AGENDA&&e.jsx("p",{style:{color:"#B0B0B0",marginBottom:12},children:'La agenda muestra un listado de eventos por fecha. Usa "Nuevo Evento" para crear uno.'}),e.jsx(Me,{showCurrentTimeIndicator:!1,localizer:Ye,events:u,startAccessor:"start",endAccessor:"end",style:{height:600},onSelectEvent:fe,selectable:!0,onSelectSlot:ye,eventPropGetter:ve,view:h,onView:A,date:N,onNavigate:_,components:{dateCellWrapper:je,event:be},messages:{next:"Siguiente",previous:"Anterior",today:"Hoy",month:"Mes",week:"Semana",day:"DÃ­a",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango"}})]})}),e.jsx("div",{className:"calendar-legend",children:e.jsxs("div",{className:"legend-items",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot legend-rutina"})," ",e.jsx("span",{children:"Rutinas"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot legend-sesion"})," ",e.jsx("span",{children:"Sesiones"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot legend-consulta"})," ",e.jsx("span",{children:"Consultas"})]})]})})]}),M&&e.jsx("div",{className:"event-modal-overlay",children:e.jsxs("div",{className:"event-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title",children:"Nuevo Evento"}),e.jsx("button",{onClick:()=>{v(!1),q()},className:"modal-close",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("form",{className:"modal-form",onSubmit:t=>{t.preventDefault(),me()},children:[e.jsxs("div",{className:"form-row-triple",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo *"}),e.jsxs("select",{value:d.type,onChange:t=>S({...d,type:t.target.value}),className:"form-select",children:[e.jsx("option",{value:"sesion",children:"SesiÃ³n"}),e.jsx("option",{value:"consulta",children:"Consulta"}),e.jsx("option",{value:"rutina",children:"Rutina"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cliente *"}),e.jsxs("select",{value:d.clientId,onChange:t=>S({...d,clientId:t.target.value}),className:"form-select",children:[e.jsx("option",{value:"",children:"Seleccionar"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name||t.email},t.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"TÃ­tulo *"}),e.jsx("input",{type:"text",value:d.title,onChange:t=>S({...d,title:t.target.value}),className:"form-input",placeholder:"Ej: SesiÃ³n"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Inicio *"}),e.jsx("input",{type:"datetime-local",value:d.startTime,onChange:t=>S({...d,startTime:t.target.value}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fin *"}),e.jsx("input",{type:"datetime-local",value:d.endTime,onChange:t=>S({...d,endTime:t.target.value}),className:"form-input"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",onClick:()=>{v(!1),q()},className:"btn-cancel",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:Z,className:"btn-save",children:Z?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading-spinner"}),"Creando..."]}):"Crear"})]})]})]})}),a&&e.jsx("div",{className:"event-modal-overlay",onClick:()=>f(null),children:e.jsxs("div",{className:"event-modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"modal-title",children:[e.jsx("span",{className:`type-dot ${a.type==="routine"?"dot-rutina":a.type==="session"?"dot-sesion":"dot-consulta"}`}),ae(a.type),"  â€”  ",a.client?.name||a.client?.email||"Cliente"]}),e.jsx("button",{onClick:()=>f(null),className:"modal-close","aria-label":"Cerrar",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"modal-form",style:{display:"grid",gap:12},children:[w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"TÃ­tulo *"}),e.jsx("input",{type:"text",className:"form-input",value:c.title,onChange:t=>D({...c,title:t.target.value})})]})}),e.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"Inicio *"}),e.jsx("input",{type:"datetime-local",className:"form-input",value:c.startTime,onChange:t=>D({...c,startTime:t.target.value})})]}),e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"Fin *"}),e.jsx("input",{type:"datetime-local",className:"form-input",value:c.endTime,onChange:t=>D({...c,endTime:t.target.value})})]})]}),e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"UbicaciÃ³n"}),e.jsx("input",{type:"text",className:"form-input",value:c.location,onChange:t=>D({...c,location:t.target.value})})]}),e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"DescripciÃ³n"}),e.jsx("textarea",{className:"form-textarea",rows:3,value:c.description,onChange:t=>D({...c,description:t.target.value})})]}),e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"Notas"}),e.jsx("textarea",{className:"form-textarea",rows:3,value:c.notes,onChange:t=>D({...c,notes:t.target.value})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"Tipo"}),e.jsxs("div",{className:"form-input",style:{display:"flex",alignItems:"center",gap:8},children:[ge(a.type),e.jsx("span",{children:ae(a.type)})]})]}),e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"Estado"}),e.jsx("div",{className:"form-input",children:xe(a.status)})]})]}),e.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"Cliente"}),e.jsx("div",{className:"form-input",children:a.client?.name||a.client?.email||"â€”"})]}),e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"Horario"}),e.jsxs("div",{className:"form-input",children:[new Date(a.start).toLocaleDateString("es-ES")," â€¢ ",he(a.start,a.end)]})]})]}),a.location&&e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"UbicaciÃ³n"}),e.jsx("div",{className:"form-input",children:a.location})]}),a.description&&e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"DescripciÃ³n"}),e.jsx("div",{className:"form-textarea",style:{whiteSpace:"pre-wrap"},children:a.description})]}),a.notes&&e.jsxs("div",{className:"form-group",style:{display:"grid",gap:6},children:[e.jsx("label",{className:"form-label",children:"Notas"}),e.jsx("div",{className:"form-textarea",style:{whiteSpace:"pre-wrap"},children:a.notes})]})]}),e.jsx("div",{className:"modal-actions",style:{display:"flex",gap:8,justifyContent:"flex-end"},children:w?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn-close-primary",onClick:()=>E(!1),children:"Cancelar ediciÃ³n"}),e.jsx("button",{type:"button",className:"btn-save",onClick:ue,disabled:P,children:P?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading-spinner"}),"Guardando..."]}):"Guardar cambios"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>E(!0),children:"Editar"}),e.jsx("button",{type:"button",className:"btn-confirm",onClick:()=>{U(a.id,"CONFIRMED"),f(null)},title:"Confirmar",children:"Confirmar"}),e.jsx("button",{type:"button",className:"btn-completed",onClick:()=>{U(a.id,"COMPLETED"),f(null)},title:"Marcar como completado",children:"Completado"}),e.jsx("button",{type:"button",className:"btn-no-show",onClick:()=>{U(a.id,"NO_SHOW"),f(null)},title:"Marcar como no presentado",children:"No presentado"}),e.jsx("button",{type:"button",className:"btn-danger",onClick:()=>{U(a.id,"CANCELLED"),f(null)},title:"Cancelar evento",children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn-danger",onClick:()=>{pe(a.id),f(null)},title:"Eliminar evento",children:"Eliminar"}),e.jsx("button",{type:"button",className:"btn-close-primary",onClick:()=>f(null),children:"Cerrar"})]})})]})]})})]})};export{ct as default};
